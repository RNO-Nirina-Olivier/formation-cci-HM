<div
  *ngIf="!isLoginPage()"
  class="dashboard-container"
  [class.menu-collapsed]="!menuOpen"
>
  <!-- Sidebar -->
  <aside class="sidebar" [class.collapsed]="!menuOpen">
    <div class="sidebar-header">
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
          <circle cx="16" cy="16" r="14" fill="#667eea" />
          <path
            d="M16 8v16M8 16h16"
            stroke="white"
            stroke-width="2.5"
            stroke-linecap="round"
          />
        </svg>
        <span class="logo-text" *ngIf="menuOpen">CCI Haute Matsiatra</span>
      </div>
    </div>

    <nav class="sidebar-nav">
      <a
        *ngIf="authService.isAuthenticated()"
        href="#"
        class="nav-item active"
        routerLink="/dashboard"
        routerLinkActive="active"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path
            d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"
          />
        </svg>
        <span>Tableau de bord</span>
      </a>

      <a
        *ngIf="authService.isAuthenticated()"
        href="#"
        class="nav-item"
        routerLink="/utilisateur"
        routerLinkActive="active"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path
            d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"
          />
        </svg>
        <span>Utilisateurs</span>
      </a>
      <a
        *ngIf="authService.isAuthenticated()"
        href="#"
        class="nav-item"
        routerLink="/apprentis"
        routerLinkActive="active"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path
            d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"
          />
        </svg>
        <span>Apprentis</span>
      </a>
      <a
        *ngIf="authService.isAuthenticated()"
        href="#"
        class="nav-item"
        routerLink="/formations"
        routerLinkActive="active"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path
            d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"
          />
        </svg>
        <span>Formation</span>
      </a>
      <a
        *ngIf="authService.isAuthenticated()"
        href="#"
        class="nav-item"
        routerLink="/inscriptions"
        routerLinkActive="active"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path
            fill-rule="evenodd"
            d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z"
            clip-rule="evenodd"
          />
        </svg>
        <span>Inscriptions</span>
      </a>
      <a
        *ngIf="authService.isAuthenticated()"
        href="#"
        class="nav-item"
        routerLink="/reinscriptions"
        routerLinkActive="active"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path
            fill-rule="evenodd"
            d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z"
            clip-rule="evenodd"
          />
        </svg>
        <span>Reinscriptions</span>
      </a>
      <a
        *ngIf="authService.isAuthenticated()"
        href="#"
        class="nav-item"
        routerLink="/matieres"
        routerLinkActive="active"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path
            d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"
          />
        </svg>
        <span>Matieres</span>
      </a>
      <a
        *ngIf="authService.isAuthenticated()"
        href="#"
        class="nav-item"
        routerLink="/presences"
        routerLinkActive="active"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path
            fill-rule="evenodd"
            d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
            clip-rule="evenodd"
          />
        </svg>
        <span>Presences</span>
      </a>
      <a
        *ngIf="authService.isAuthenticated()"
        href="#"
        class="nav-item"
        routerLink="/suivi-pratiques"
        routerLinkActive="active"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" />
          <path
            fill-rule="evenodd"
            d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z"
            clip-rule="evenodd"
          />
        </svg>
        <span>Suivie Pratiques</span>
      </a>
      <a
        *ngIf="authService.isAuthenticated()"
        href="#"
        class="nav-item"
        routerLink="/notes"
        routerLinkActive="active"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path
            fill-rule="evenodd"
            d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
            clip-rule="evenodd"
          />
        </svg>
        <span>Notes</span>
      </a>
      <a
        *ngIf="authService.isAuthenticated()"
        href="#"
        class="nav-item"
        routerLink="/evaluation"
        routerLinkActive="active"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path
            d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"
          />
        </svg>
        <span>Resultats</span>
      </a>
      <a
        *ngIf="authService.isAuthenticated()"
        href="#"
        class="nav-item"
        routerLink="/certificat"
        routerLinkActive="active"
      >
      <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
        <path
          fill-rule="evenodd"
          d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm8 10a1 1 0 100-2H8a1 1 0 100 2h4zm-4-4a1 1 0 000-2 1 1 0 000 2zm6 0a1 1 0 100-2 1 1 0 000 2z"
          clip-rule="evenodd"
        />
      </svg>
        <span>Certificats</span>
      </a>
      <a
      *ngIf="authService.isAuthenticated()"
      href="#"
      class="nav-item"
      routerLink="/rapport"
      routerLinkActive="active"
    >
    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
      <path
        fill-rule="evenodd"
        d="M10 18a8 8 0 100-16 8 8 0 000 16zm2.293-10.707a1 1 0 010 1.414l-3 3a1 1 0 01-1.414 0l-1.5-1.5a1 1 0 111.414-1.414L9 9.586l2.293-2.293a1 1 0 011.414 0z"
        clip-rule="evenodd"
      />
      <path d="M5 5h2v2H5V5zm0 4h2v2H5V9zm0 4h2v2H5v-2z" />
    </svg>
      <span>Rapport</span>
    </a>
    </nav>
  </aside>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <button
          class="menu-toggle"
          (click)="toggleMenu()"
          aria-label="Toggle menu"
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
        <h2>Chambre de Commerce et d'Industrie Haute Matsiatra</h2>
      </div>

      <div class="header-right">
        <!-- Search -->
        <div class="search-box">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path
              fill-rule="evenodd"
              d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
            />
          </svg>
          <input type="text" placeholder="Rechercher..." />
        </div>

        <!-- User Menu -->
        <div class="user-menu" [class.active]="showUserMenu">
          <div class="dropdown-body">
            <!-- Dans votre menu dropdown -->
            <a href="#" class="dropdown-item danger" (click)="logout()">
              <svg
                width="18"
                height="18"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1H3zm11 4.414l-4.293 4.293a1 1 0 01-1.414 0L6.586 10 5.172 11.414l2.707 2.707a3 3 0 004.242 0l4.293-4.293L14.828 8.414z"
                />
              </svg>
              Déconnexion
            </a>
          </div>
        </div>
        <div class="logout-modal" id="logoutModal" *ngIf="showLogoutModal">
          <div class="modal-overlay" (click)="closeLogoutModal()">
            <div class="modal-content" (click)="$event.stopPropagation()">
              <div class="modal-header">
                <h3>Confirmation de déconnexion</h3>
              </div>
              <div class="modal-body">
                <svg
                  class="warning-icon"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path
                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15h2v2h-2zm0-12h2v10h-2z"
                  />
                </svg>
                <p>Êtes-vous sûr de vouloir vous déconnecter ?</p>
              </div>
              <div class="modal-footer">
                <button class="btn btn-cancel" (click)="closeLogoutModal()">
                  Annuler
                </button>
                <button class="btn btn-confirm" (click)="confirmLogout()">
                  Se déconnecter
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Content Area - Injecté dynamiquement -->
    <div class="content-wrapper">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>
<div *ngIf="isLoginPage()">
  <router-outlet></router-outlet>
</div>
